<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Adventskalender Tag 22</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Tag&nbsp;22 – Wichtel fangen</h1>
  </header>
  <main class="puzzle-container">
    <p>Die Weihnachtsmänner tauchen in den Löchern auf. Klicke sie schnell weg! Schaffst du mindestens fünf Treffer?</p>
    <div id="whack-container">
      <div class="whack-hole"><img src="assets/santa_head.png" alt="Santa" /></div>
      <div class="whack-hole"><img src="assets/santa_head.png" alt="Santa" /></div>
      <div class="whack-hole"><img src="assets/santa_head.png" alt="Santa" /></div>
    </div>
    <div id="whackFeedback" style="margin-top:10px;"></div>
    <div id="letter-container" class="letter-container" style="display:none;">
      <p>Dein Buchstabe:</p>
      <div class="letter" id="letter"></div>
      <p>Merke dir diesen Buchstaben!</p>
    </div>
  </main>
  <footer>
    <a href="index.html">Zurück zum Kalender</a>
  </footer>
  <script>
    const holes = document.querySelectorAll('.whack-hole');
    let hits = 0;
    let rounds = 0;
    let maxRounds = 15;
    function showSanta() {
      // Hide all
      holes.forEach(hole => {
        hole.querySelector('img').style.display = 'none';
      });
      const idx = Math.floor(Math.random() * holes.length);
      const img = holes[idx].querySelector('img');
      img.style.display = 'block';
      const onClick = () => {
        hits++;
        img.style.display = 'none';
        img.removeEventListener('click', onClick);
      };
      img.addEventListener('click', onClick);
    }
    function nextRound() {
      rounds++;
      if (rounds > maxRounds) {
        finishGame();
        return;
      }
      showSanta();
      setTimeout(nextRound, 800);
    }
    function finishGame() {
      holes.forEach(hole => {
        hole.querySelector('img').style.display = 'none';
      });
      if (hits >= 5) {
        document.getElementById('whackFeedback').textContent = 'Super! Du hast ' + hits + ' Treffer erzielt.';
        showLetter('L');
      } else {
        document.getElementById('whackFeedback').textContent = 'Leider nur ' + hits + ' Treffer. Versuche es nochmal!';
      }
    }
    function showLetter(letter) {
      const container = document.getElementById('letter-container');
      document.getElementById('letter').textContent = letter;
      container.style.display = 'block';
    }
    // Starte nach kurzer Verzögerung
    setTimeout(nextRound, 1000);
  </script>
</body>
</html>