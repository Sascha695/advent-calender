<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>6. Dezember â€“ Nikolaus im harten Labyrinth</title>
<style>
  :root{
    --cell: 22px;
    --gap: 2px;
    --cols: 10;
    --wall:#0f172a;     /* WÃ¤nde */
    --path:#ffffff;     /* besuchte Wege */
    --path-dim:#cbd5e1; /* graue Wege (im Sichtkegel, unbesucht) */
    --forest:#166534;   /* AuÃŸenwald */
    --house:#ffd54f;    /* Ziel */
    --grid-outline:#00000033;
    --player-scale: 1.2;
    --goal-scale:   1.05;
    --bg-scale: 1.4; /* Hintergrund-Zoom (1 = normal, >1 = nÃ¤her, <1 = weiter) */
  }

  body{
    margin:0;height:100%;
    font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:#e8f3ea;
    background-size: calc(100% * var(--bg-scale)) auto; /* Zoom hier aktiv */
    background-position:center;
    background-attachment:fixed;
    color:#111;
  }
  .bg-overlay{ position:fixed; inset:0; pointer-events:none; background:linear-gradient(0deg, rgba(0,0,0,.16), rgba(0,0,0,.16)); z-index:-1; }

  header,footer{padding:10px 8px; text-align:center}
  h1{margin:0 0 6px; font-size:1.1rem}
  .sub{opacity:.9; font-size:.95rem}
  .intro{
    margin:8px auto 0; max-width:800px; padding:8px 10px;
    background:#fff; border:1px solid #dbe2ea; border-radius:10px; line-height:1.35;
  }

  .wrap{display:grid; place-items:center; padding:8px; gap:8px}
  .bar{display:flex; gap:8px; align-items:center; justify-content:center; flex-wrap:wrap}
  .bar button{
    padding:8px 12px; border-radius:10px; border:1px solid #b8c1cc; background:#fff; font:inherit; cursor:pointer;
  }

  .frame{
    padding:6px; border-radius:14px; background:rgba(255,255,255,.65);
    box-shadow:0 10px 28px rgba(0,0,0,.18), inset 0 0 0 2px var(--grid-outline);
    max-width:100vw;
    max-height:calc(100vh - 220px);
    overflow:auto;
  }

  .maze{
    display:grid;
    grid-template-columns:repeat(var(--cols), var(--cell));
    grid-auto-rows:var(--cell);
    gap:var(--gap);
    touch-action: pan-y;
    outline:2px solid var(--grid-outline);
    outline-offset:4px;
    background:#fafafaAA; border-radius:10px;
    isolation:isolate;
  }

  .cell{
    width:var(--cell); height:var(--cell);
    border-radius:4px; position:relative; display:grid; place-items:center;
    user-select:none; overflow:visible;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.10);
  }

  .wall{   background:var(--wall); }
  .path{   background:var(--path); }
  .path.dim{ background:var(--path-dim); }
  .forest{ background:var(--forest); }
  .goal{ background:var(--house); }
  .goal.fallback::after{ content:"ðŸ "; font-size:calc(var(--cell)*0.75); }

  .sprite{
    position:absolute; inset:50% auto auto 50%; transform:translate(-50%,-50%);
    width:calc(var(--cell) * var(--player-scale)); height:calc(var(--cell) * var(--player-scale));
    display:grid; place-items:center; background-repeat:no-repeat; background-size:contain; background-position:center;
    pointer-events:none; text-shadow:0 1px 2px rgba(0,0,0,.35);
  }
  .sprite.emoji{ font-size:calc(var(--cell) * var(--player-scale)*0.9); }
  .goal-sprite{
    position:absolute; inset:50% auto auto 50%; transform:translate(-50%,-50%);
    width:calc(var(--cell) * var(--goal-scale)); height:calc(var(--cell) * var(--goal-scale));
    background-repeat:no-repeat; background-size:contain; background-position:center; pointer-events:none;
  }

  .fog{ position:relative; background:#0b1220 !important; box-shadow:none !important; }
  .fog > * { display:none !important; }

  .hint{ font-size:.9rem; opacity:.9; margin:2px 0 0; text-align:center; }

  .controls{
    display:grid;
    grid-template-areas:
      ". up ."
      "left center right"
      ". down .";
    gap:8px;
  }
  .btn{ grid-area:center; width:52px;height:52px;border-radius:12px;border:1px solid #b8c1cc;background:#fff;font-size:20px; }
  .btn:active{ transform:translateY(1px); }
  .up{grid-area:up}.down{grid-area:down}.left{grid-area:left}.right{grid-area:right}

  @media (max-width:400px){
    .frame{ max-height: calc(100vh - 200px); }
    .btn{ width:46px; height:46px; font-size:18px; }
  }
</style>
</head>
<body>
<div class="bg-overlay"></div>

<header>
  <h1>6. Dezember â€“ Nikolaus im harten Labyrinth</h1>
  <div class="sub">Langer Umweg ums Haus, viele Sackgassen. AuÃŸenwald bleibt sichtbar.</div>
  <p class="intro">â€žVon drauÃŸen vom Walde, da komme ich her, aber ich habe leider den Weg zur EichbÃ¼hlstraÃŸe vergessen. Kannst du mir zeigen, wie ich zu deinem Haus komme?â€œ</p>
</header>

<main class="wrap">
  <div class="bar"></div>
  <div class="frame" id="frame">
    <div id="maze" class="maze" aria-label="Labyrinth" role="grid" tabindex="0"></div>
  </div>

  <p class="hint">Falls es zu schwer ist, dann ist hier eine Taschenlampe:</p>
  <div class="bar"><button id="fogToggle" class="toggle" aria-pressed="false">Sichtfeld AN</button></div>

  <div class="controls" aria-label="Pfeiltasten">
    <button class="btn up"    aria-label="Nach oben">â–²</button>
    <button class="btn left"  aria-label="Nach links">â—€</button>
    <button class="btn" disabled>ðŸŽ…</button>
    <button class="btn right" aria-label="Nach rechts">â–¶</button>
    <button class="btn down"  aria-label="Nach unten">â–¼</button>
  </div>

  <div class="win" id="win" style="display:none">Geschafft! Merke dir den Buchstaben: <strong id="letter">N</strong></div>
</main>

<footer><p><a href="index.html">ZurÃ¼ck zum Kalender</a></p></footer>

<script>
/* ==== Bilder ==== */
const backgroundImageURL = "assets/nikolaus_map.png";
if (backgroundImageURL){
  const safeURL = encodeURI(backgroundImageURL);
  document.body.style.backgroundImage = `url('${safeURL}')`;
  document.documentElement.style.setProperty('--bg-scale', '1.4'); // Zoomfaktor hier Ã¤ndern!
}

/* ==== Level aktivieren ==== */
const USE_LEVEL = true; // <--- Dein Level wird genutzt!

/* ==== Dein 29Ã—29-Level (0 = Weg, 1 = Wand) ==== */
const LEVEL = [
   [1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
   [1,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1],
   [1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1],
   [1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1],
   [1,0,1,0,1,1,1,0,1,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,1],
   [1,0,1,0,1,0,0,0,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1],
   [1,0,1,0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,1,1,0,1,1,1,1,1,0,1,1],
   [1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1],
   [1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1],
   [1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1],
   [1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,0,1,1],
   [1,1,0,0,1,1,1,1,1,0,1,1,0,0,0,0,1,1,1,1,1,0,1,1,0,0,0,1,1],
   [1,1,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1],
   [1,1,1,0,1,0,1,1,1,1,1,1,0,0,0,1,1,1,0,1,1,0,0,0,0,0,0,1,1],
   [1,1,1,0,1,0,0,0,0,0,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,0,1,1],
   [1,1,1,0,1,0,1,1,0,1,1,1,0,1,1,0,0,0,0,1,1,1,1,0,1,1,0,1,1],
   [1,1,1,0,1,0,1,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1],
   [1,1,1,1,1,0,0,1,0,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,1,1,0,1,1],
   [1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1],
   [1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1],
   [1,1,0,1,1,1,1,0,0,0,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1],
   [1,1,0,1,1,1,1,0,1,1,1,1,0,1,0,1,1,0,0,0,1,1,0,1,1,1,1,1,1],
   [1,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0,1,0,0,0,0,1,1,1,1],
   [1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,0,0,1,1,0,1,1,1,1,0,1,1,1,1],
   [1,1,0,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1],
   [1,1,1,0,0,0,0,0,0,0,1,1,0,1,1,0,1,0,1,0,0,0,1,1,0,1,1,1,1],
   [1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1],
   [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
];

/* ==== Rest wie gehabt ==== */
// (Hier folgt unverÃ¤ndert dein gesamter JavaScript-Code aus deiner Vorlage)
</script>
</body>
</html>








