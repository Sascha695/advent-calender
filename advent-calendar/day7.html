<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Adventskalender Tag 7</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #maze-container {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Tag&nbsp;7 – Labyrinth</h1>
  </header>
  <main class="puzzle-container">
    <p>Finde den Weg durch das Labyrinth. Benutze die Pfeiltasten, um den blauen Punkt zum grünen Ziel zu bewegen.</p>
    <div id="maze-container"></div>
    <div id="letter-container" class="letter-container" style="display:none;">
      <p>Dein Buchstabe:</p>
      <div class="letter" id="letter"></div>
      <p>Merke dir diesen Buchstaben!</p>
    </div>
  </main>
  <footer>
    <a href="index.html">Zurück zum Kalender</a>
  </footer>
  <script>
    const maze = [
      [0,1,0,0,1,0,0],
      [0,1,0,1,0,1,0],
      [0,1,0,1,0,1,0],
      [0,0,0,0,0,1,0],
      [1,1,1,1,0,1,0],
      [0,0,0,1,0,0,0],
      [0,1,0,0,0,1,0]
    ];
    let position = { r: 0, c: 0 };
    const goal = { r: 6, c: 6 };
    const container = document.getElementById('maze-container');
    function drawMaze() {
      container.innerHTML = '';
      const table = document.createElement('table');
      for (let r = 0; r < maze.length; r++) {
        const tr = document.createElement('tr');
        for (let c = 0; c < maze[r].length; c++) {
          const td = document.createElement('td');
          if (maze[r][c] === 1) {
            td.classList.add('wall');
          }
          if (r === position.r && c === position.c) {
            td.classList.add('player');
          }
          if (r === goal.r && c === goal.c) {
            td.classList.add('goal');
          }
          tr.appendChild(td);
        }
        table.appendChild(tr);
      }
      container.appendChild(table);
    }
    function move(dr, dc) {
      const nr = position.r + dr;
      const nc = position.c + dc;
      if (nr < 0 || nc < 0 || nr >= maze.length || nc >= maze[0].length) return;
      if (maze[nr][nc] === 1) return;
      position = { r: nr, c: nc };
      drawMaze();
      if (position.r === goal.r && position.c === goal.c) {
        showLetter('N');
        document.removeEventListener('keydown', keyHandler);
      }
    }
    function keyHandler(e) {
      switch (e.key) {
        case 'ArrowUp': move(-1, 0); break;
        case 'ArrowDown': move(1, 0); break;
        case 'ArrowLeft': move(0, -1); break;
        case 'ArrowRight': move(0, 1); break;
      }
    }
    drawMaze();
    document.addEventListener('keydown', keyHandler);
    function showLetter(letter) {
      const container = document.getElementById('letter-container');
      document.getElementById('letter').textContent = letter;
      container.style.display = 'block';
    }
  </script>
</body>
</html>