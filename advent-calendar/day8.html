<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Adventskalender Tag 8</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Tag&nbsp;8 – Galgenmännchen</h1>
  </header>
  <main class="puzzle-container">
    <p>Errate das Wort. Klicke die Buchstaben an. Du hast maximal 7 Fehlversuche.</p>
    <div id="hangmanWord" style="font-size:2rem; letter-spacing: 10px; margin-bottom:10px;"></div>
    <div>Fehlversuche: <span id="mistakes">0</span>/7</div>
    <div class="hangman-letters" id="letterButtons"></div>
    <div id="hangmanFeedback" style="color:red; margin-top:10px;"></div>
    <div id="letter-container" class="letter-container" style="display:none;">
      <p>Dein Buchstabe:</p>
      <div class="letter" id="letter"></div>
      <p>Merke dir diesen Buchstaben!</p>
    </div>
  </main>
  <footer>
    <a href="index.html">Zurück zum Kalender</a>
  </footer>
  <script>
    const word = 'RENTIER';
    let guessed = [];
    let mistakes = 0;
    const wordDiv = document.getElementById('hangmanWord');
    const mistakesSpan = document.getElementById('mistakes');
    const feedbackDiv = document.getElementById('hangmanFeedback');
    function updateWord() {
      let display = '';
      let solved = true;
      for (let ch of word) {
        if (guessed.includes(ch)) {
          display += ch + ' ';
        } else {
          display += '_ ';
          solved = false;
        }
      }
      wordDiv.textContent = display.trim();
      if (solved) {
        showLetter('L');
      }
    }
    function createButtons() {
      const buttonsDiv = document.getElementById('letterButtons');
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      for (let ch of letters) {
        const btn = document.createElement('button');
        btn.textContent = ch;
        btn.addEventListener('click', () => handleGuess(ch, btn));
        buttonsDiv.appendChild(btn);
      }
    }
    function handleGuess(letter, btn) {
      btn.disabled = true;
      if (word.includes(letter)) {
        guessed.push(letter);
        updateWord();
      } else {
        mistakes++;
        mistakesSpan.textContent = mistakes;
        if (mistakes >= 7) {
          feedbackDiv.textContent = 'Leider verloren! Das Wort war "' + word + '".';
          // disable remaining buttons
          const allButtons = document.getElementById('letterButtons').querySelectorAll('button');
          allButtons.forEach(b => b.disabled = true);
        }
      }
    }
    function showLetter(letter) {
      const container = document.getElementById('letter-container');
      document.getElementById('letter').textContent = letter;
      container.style.display = 'block';
      // disable remaining buttons
      const allButtons = document.getElementById('letterButtons').querySelectorAll('button');
      allButtons.forEach(b => b.disabled = true);
    }
    createButtons();
    updateWord();
  </script>
</body>
</html>