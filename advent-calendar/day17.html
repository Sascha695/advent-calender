<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Adventskalender Tag 17</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Tag&nbsp;17 – Suchsel</h1>
  </header>
  <main class="puzzle-container">
    <p>Finde die versteckten Wörter und markiere ihre Buchstaben. Die Wörter können horizontal liegen.</p>
    <div class="word-search-grid" id="wordGrid"></div>
    <p>Gesuchte Wörter: <strong>SCHNEE</strong>, <strong>ADVENT</strong>, <strong>LICHT</strong></p>
    <div id="searchFeedback" style="color:red; margin-top:10px;"></div>
    <div id="letter-container" class="letter-container" style="display:none;">
      <p>Dein Buchstabe:</p>
      <div class="letter" id="letter"></div>
      <p>Merke dir diesen Buchstaben!</p>
    </div>
  </main>
  <footer>
    <a href="index.html">Zurück zum Kalender</a>
  </footer>
  <script>
    const letters = [
      ['S','C','H','N','E','E'],
      ['A','D','V','E','N','T'],
      ['T','A','N','N','E','N'],
      ['O','B','E','R','N','D'],
      ['L','I','C','H','T','E'],
      ['G','E','S','C','H','E']
    ];
    const wordGrid = document.getElementById('wordGrid');
    // Positionen der Wörter
    const words = {
      'SCHNEE': [ [0,0],[0,1],[0,2],[0,3],[0,4],[0,5] ],
      'ADVENT': [ [1,0],[1,1],[1,2],[1,3],[1,4],[1,5] ],
      'LICHT': [ [4,0],[4,1],[4,2],[4,3],[4,4] ]
    };
    const found = {
      'SCHNEE': false,
      'ADVENT': false,
      'LICHT': false
    };
    const selected = new Set();
    function cellKey(r,c) { return r + '-' + c; }
    for (let r = 0; r < letters.length; r++) {
      for (let c = 0; c < letters[r].length; c++) {
        const cell = document.createElement('div');
        cell.classList.add('word-search-cell');
        cell.textContent = letters[r][c];
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.addEventListener('click', () => {
          const key = cellKey(r,c);
          if (selected.has(key)) {
            selected.delete(key);
            cell.classList.remove('selected');
          } else {
            selected.add(key);
            cell.classList.add('selected');
          }
          checkWords();
        });
        wordGrid.appendChild(cell);
      }
    }
    function checkWords() {
      for (let name in words) {
        const positions = words[name];
        const allSelected = positions.every(([r,c]) => selected.has(cellKey(r,c)));
        found[name] = allSelected;
      }
      if (found['SCHNEE'] && found['ADVENT'] && found['LICHT']) {
        showLetter('G');
      }
    }
    function showLetter(letter) {
      const container = document.getElementById('letter-container');
      document.getElementById('letter').textContent = letter;
      container.style.display = 'block';
      // Prevent further interaction
      document.querySelectorAll('.word-search-cell').forEach(c => c.style.pointerEvents = 'none');
    }
  </script>
</body>
</html>