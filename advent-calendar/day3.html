<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Adventskalender Tag 3</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Tag&nbsp;3 – Memory-Spiel</h1>
  </header>
  <main class="puzzle-container">
    <p>Finde alle passenden Paare von Weihnachtsmotiven. Wenn du alle Paare gefunden hast, erscheint der Buchstabe.</p>
    <div class="memory-grid" id="memoryGrid"></div>
    <div id="letter-container" class="letter-container" style="display:none;">
      <p>Dein Buchstabe:</p>
      <div class="letter" id="letter"></div>
      <p>Merke dir diesen Buchstaben!</p>
    </div>
  </main>
  <footer>
    <a href="index.html">Zurück zum Kalender</a>
  </footer>
  <script>
    // Karten für das Memory (jeweils zweimal)
    const cards = [
      { name: 'tree', img: 'assets/tree.png' },
      { name: 'gift', img: 'assets/gift.png' },
      { name: 'snowman', img: 'assets/snowman.png' },
      { name: 'reindeer', img: 'assets/reindeer.png' }
    ];
    // Deck verdoppeln und mischen
    let deck = cards.concat(cards);
    deck = deck.sort(() => Math.random() - 0.5);
    const memoryGrid = document.getElementById('memoryGrid');
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let matches = 0;
    deck.forEach((card, index) => {
      const cardElement = document.createElement('div');
      cardElement.classList.add('memory-card');
      cardElement.dataset.name = card.name;
      // Rückseite
      const back = document.createElement('div');
      back.classList.add('back');
      // Vorderseite
      const front = document.createElement('div');
      front.classList.add('front');
      front.style.backgroundImage = `url('${card.img}')`;
      cardElement.appendChild(back);
      cardElement.appendChild(front);
      cardElement.addEventListener('click', () => {
        if (lockBoard) return;
        if (cardElement.classList.contains('matched')) return;
        cardElement.classList.add('flip');
        if (!firstCard) {
          firstCard = cardElement;
          return;
        }
        if (firstCard === cardElement) return;
        secondCard = cardElement;
        lockBoard = true;
        // Prüfen ob gleiche Karten
        if (firstCard.dataset.name === secondCard.dataset.name) {
          firstCard.classList.add('matched');
          secondCard.classList.add('matched');
          matches++;
          resetBoard();
          if (matches === cards.length) {
            showLetter('H');
          }
        } else {
          // Nach kurzer Zeit wieder umdrehen
          setTimeout(() => {
            firstCard.classList.remove('flip');
            secondCard.classList.remove('flip');
            resetBoard();
          }, 700);
        }
      });
      memoryGrid.appendChild(cardElement);
    });
    function resetBoard() {
      [firstCard, secondCard, lockBoard] = [null, null, false];
    }
    function showLetter(letter) {
      const container = document.getElementById('letter-container');
      document.getElementById('letter').textContent = letter;
      container.style.display = 'block';
    }
  </script>
</body>
</html>