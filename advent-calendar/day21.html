<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Adventskalender Tag 21</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Tag&nbsp;21 – Buchstaben sortieren</h1>
  </header>
  <main class="puzzle-container">
    <p>Ordne die Buchstaben, um ein weihnachtliches Wort zu bilden.</p>
    <div class="letter-bank" id="letterBank">
      <div class="letter-tile" draggable="true">K</div>
      <div class="letter-tile" draggable="true">E</div>
      <div class="letter-tile" draggable="true">G</div>
      <div class="letter-tile" draggable="true">O</div>
      <div class="letter-tile" draggable="true">L</div>
      <div class="letter-tile" draggable="true">C</div>
    </div>
    <div class="letter-slots" id="letterSlots">
      <div class="slot" data-index="0"></div>
      <div class="slot" data-index="1"></div>
      <div class="slot" data-index="2"></div>
      <div class="slot" data-index="3"></div>
      <div class="slot" data-index="4"></div>
      <div class="slot" data-index="5"></div>
    </div>
    <div id="sortFeedback" style="color:red; margin-top:10px;"></div>
    <div id="letter-container" class="letter-container" style="display:none;">
      <p>Dein Buchstabe:</p>
      <div class="letter" id="letter"></div>
      <p>Merke dir diesen Buchstaben!</p>
    </div>
  </main>
  <footer>
    <a href="index.html">Zurück zum Kalender</a>
  </footer>
  <script>
    const correctWord = ['G','L','O','C','K','E'];
    // Drag start on tiles
    document.querySelectorAll('.letter-tile').forEach(tile => {
      tile.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', tile.textContent);
      });
    });
    // Allow drops on slots
    document.querySelectorAll('.slot').forEach(slot => {
      slot.addEventListener('dragover', e => e.preventDefault());
      slot.addEventListener('drop', e => {
        e.preventDefault();
        const letter = e.dataTransfer.getData('text/plain');
        if (!letter) return;
        // If slot already filled, ignore
        if (slot.textContent.trim() !== '') return;
        slot.textContent = letter;
        // remove letter tile from bank
        const tiles = document.querySelectorAll('.letter-tile');
        tiles.forEach(t => {
          if (t.textContent === letter && !t.classList.contains('used')) {
            t.classList.add('used');
            t.style.visibility = 'hidden';
            return;
          }
        });
        checkSlots();
      });
    });
    function checkSlots() {
      const slots = document.querySelectorAll('.slot');
      for (let i = 0; i < correctWord.length; i++) {
        if (slots[i].textContent.trim() !== correctWord[i]) {
          return;
        }
      }
      showLetter('I');
    }
    function showLetter(letter) {
      const container = document.getElementById('letter-container');
      document.getElementById('letter').textContent = letter;
      container.style.display = 'block';
    }
  </script>
</body>
</html>